{"version":3,"file":"system-node.js","sources":["../src/common.js","../src/system-core.js","../src/utils/compile.js","../src/utils/fetch.js","../src/features/node-load.js","../src/extras/global.js","../src/features/node-common.js","../src/features/import-map.js","../src/features/registry.js"],"sourcesContent":["import path from 'path';\nimport url from 'url';\n\nimport fileUrlFromPath from 'file-url';\nimport SourceMapSupport from 'source-map-support';\n\nexport const isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\nexport const isNode = typeof process !== 'undefined' && process.versions && process.versions.node;\nexport const isWorker = typeof document === 'undefined' && typeof window === 'undefined' && typeof self !== 'undefined';\n\nexport const hasSelf = typeof self !== 'undefined';\n\nfunction getGlobal () {\n  if (typeof self !== 'undefined') { return self; }\n  if (typeof window !== 'undefined') { return window; }\n  if (typeof global !== 'undefined') { return global; }\n  throw new Error('unable to locate global object');\n}\n\nconst envGlobal = getGlobal();\nexport { envGlobal as global };\n\nexport const URL = envGlobal.URL\n  ? envGlobal.URL\n  : url.URL;\n\nexport const pathToFileURL = url.pathToFileURL\n  ? url.pathToFileURL\n  : function pathToFileURL(filePath) {\n    const fileUrl = new URL(fileUrlFromPath(filePath));\n    if (!filePath.endsWith(path.sep)) {\n      fileUrl.pathname += '/';\n    }\n    return fileUrl;\n  };\n\nexport const fileURLToPath = url.fileURLToPath\n  ? url.fileURLToPath\n  : function fileURLToPath(fileUrl) {\n    return fileUrl.pathname;\n  };\n\nexport function urlToPath(url) {\n  url = new URL(url);\n  if (url.protocol === 'file:') {\n    return fileUrlFromPath(url);\n  }\n  return url.pathname;\n}\n\nfunction getDefaultBaseUrl() {\n  let url;\n\n  if (typeof location !== 'undefined') {\n    url = location.href.split('#')[0].split('?')[0];\n    const lastSepIndex = url.lastIndexOf('/');\n    if (lastSepIndex !== -1) {\n      url = url.slice(0, lastSepIndex + 1);\n    }\n  } else if (isNode) {\n    url = pathToFileURL(process.cwd() + '/');\n  }\n\n  return url;\n}\n\nexport function basename(moduleUrl) {\n  const filePath = urlToPath(moduleUrl);\n  return path.basename(filePath);\n}\n\nexport function dirname(moduleUrl) {\n  const filePath = urlToPath(moduleUrl);\n  return path.dirname(filePath);\n}\n\nexport const sourceMapSources = {};\n\nSourceMapSupport.install({\n  retrieveSourceMap: function(source) {\n    if (!sourceMapSources[source])\n      return null;\n\n    return {\n      url: source.replace('!transpiled', ''),\n      map: sourceMapSources[source]\n    };\n  }\n});\n\n\nexport const baseUrl = getDefaultBaseUrl();\nexport const DEFAULT_BASEURL = baseUrl;\n\nconst backslashRegEx = /\\\\/g;\nexport function resolveIfNotPlainOrUrl (relUrl, parentUrl) {\n  if (relUrl.indexOf('\\\\') !== -1)\n    relUrl = relUrl.replace(backslashRegEx, '/');\n  // protocol-relative\n  if (relUrl[0] === '/' && relUrl[1] === '/') {\n    return parentUrl.slice(0, parentUrl.indexOf(':') + 1) + relUrl;\n  }\n  // relative-url\n  else if (relUrl[0] === '.' && (relUrl[1] === '/' || relUrl[1] === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\n      relUrl.length === 1  && (relUrl += '/')) ||\n      relUrl[0] === '/') {\n    const parentProtocol = parentUrl.slice(0, parentUrl.indexOf(':') + 1);\n    // Disabled, but these cases will give inconsistent results for deep backtracking\n    //if (parentUrl[parentProtocol.length] !== '/')\n    //  throw new Error('Cannot resolve');\n    // read pathname from parent URL\n    // pathname taken to be part after leading \"/\"\n    let pathname;\n    if (parentUrl[parentProtocol.length + 1] === '/') {\n      // resolving to a :// so we need to read out the auth and host\n      if (parentProtocol !== 'file:') {\n        pathname = parentUrl.slice(parentProtocol.length + 2);\n        pathname = pathname.slice(pathname.indexOf('/') + 1);\n      }\n      else {\n        pathname = parentUrl.slice(8);\n      }\n    }\n    else {\n      // resolving to :/ so pathname is the /... part\n      pathname = parentUrl.slice(parentProtocol.length + (parentUrl[parentProtocol.length] === '/'));\n    }\n\n    if (relUrl[0] === '/')\n      return parentUrl.slice(0, parentUrl.length - pathname.length - 1) + relUrl;\n\n    // join together and split for removal of .. and . segments\n    // looping the string instead of anything fancy for perf reasons\n    // '../../../../../z' resolved to 'x/y' is just 'z'\n    const segmented = pathname.slice(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n    const output = [];\n    let segmentIndex = -1;\n    for (let i = 0; i < segmented.length; i++) {\n      // busy reading a segment - only terminate on '/'\n      if (segmentIndex !== -1) {\n        if (segmented[i] === '/') {\n          output.push(segmented.slice(segmentIndex, i + 1));\n          segmentIndex = -1;\n        }\n      }\n\n      // new segment - check if it is relative\n      else if (segmented[i] === '.') {\n        // ../ segment\n        if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i + 2 === segmented.length)) {\n          output.pop();\n          i += 2;\n        }\n        // ./ segment\n        else if (segmented[i + 1] === '/' || i + 1 === segmented.length) {\n          i += 1;\n        }\n        else {\n          // the start of a new segment as below\n          segmentIndex = i;\n        }\n      }\n      // it is the start of a new segment\n      else {\n        segmentIndex = i;\n      }\n    }\n    // finish reading out the last segment\n    if (segmentIndex !== -1)\n      output.push(segmented.slice(segmentIndex));\n    return parentUrl.slice(0, parentUrl.length - pathname.length) + output.join('');\n  }\n}\n\n/*\n * Import maps implementation\n *\n * To make lookups fast we pre-resolve the entire import map\n * and then match based on backtracked hash lookups\n *\n */\n\nfunction resolveUrl (relUrl, parentUrl) {\n  return resolveIfNotPlainOrUrl(relUrl, parentUrl) ||\n      relUrl.indexOf(':') !== -1 && relUrl ||\n      resolveIfNotPlainOrUrl('./' + relUrl, parentUrl);\n}\n\nfunction resolvePackages(pkgs) {\n  var outPkgs = {};\n  for (var p in pkgs) {\n    var value = pkgs[p];\n    // TODO package fallback support\n    if (typeof value !== 'string')\n      continue;\n    outPkgs[resolveIfNotPlainOrUrl(p) || p] = value;\n  }\n  return outPkgs;\n}\n\nexport function parseImportMap (json, baseUrl) {\n  const imports = resolvePackages(json.imports) || {};\n  const scopes = {};\n  if (json.scopes) {\n    for (let scopeName in json.scopes) {\n      const scope = json.scopes[scopeName];\n      let resolvedScopeName = resolveUrl(scopeName, baseUrl);\n      if (resolvedScopeName[resolvedScopeName.length - 1] !== '/')\n        resolvedScopeName += '/';\n      scopes[resolvedScopeName] = resolvePackages(scope) || {};\n    }\n  }\n\n  return { imports: imports, scopes: scopes, baseUrl: baseUrl };\n}\n\nfunction getMatch (path, matchObj) {\n  if (matchObj[path])\n    return path;\n  let sepIndex = path.length;\n  do {\n    const segment = path.slice(0, sepIndex + 1);\n    if (segment in matchObj)\n      return segment;\n  } while ((sepIndex = path.lastIndexOf('/', sepIndex - 1)) !== -1)\n}\n\nfunction applyPackages (id, packages, baseUrl) {\n  const pkgName = getMatch(id, packages);\n  if (pkgName) {\n    const pkg = packages[pkgName];\n    if (pkg === null)\n\n    if (id.length > pkgName.length && pkg[pkg.length - 1] !== '/')\n      console.warn(\"Invalid package target \" + pkg + \" for '\" + pkgName + \"' should have a trailing '/'.\");\n    return resolveUrl(pkg + id.slice(pkgName.length), baseUrl);\n  }\n}\n\nexport function resolveImportMap (id, parentUrl, importMap) {\n  const urlResolved = resolveIfNotPlainOrUrl(id, parentUrl || DEFAULT_BASEURL);\n  if (urlResolved)\n    id = urlResolved;\n  const scopeName = getMatch(parentUrl, importMap.scopes);\n  if (scopeName) {\n    const scopePackages = importMap.scopes[scopeName];\n    const packageResolution = applyPackages(id, scopePackages, scopeName);\n    if (packageResolution)\n      return packageResolution;\n  }\n  return applyPackages(id, importMap.imports, importMap.baseUrl) || urlResolved || throwBare(id, parentUrl);\n}\n\nexport function throwBare (id, parentUrl) {\n  throw new Error('Unable to resolve bare specifier \"' + id + (parentUrl ? '\" from ' + parentUrl : '\"'));\n}\n","/*\n * SystemJS Core\n *\n * Provides\n * - System.import\n * - System.register support for\n *     live bindings, function hoisting through circular references,\n *     reexports, dynamic import, import.meta.url, top-level await\n * - System.getRegister to get the registration\n * - Symbol.toStringTag support in Module objects\n * - Hookable System.createContext to customize import.meta\n * - System.onload(id, err?) handler for tracing / hot-reloading\n *\n * Core comes with no System.prototype.resolve or\n * System.prototype.instantiate implementations\n */\nimport { global, DEFAULT_BASEURL, URL } from './common.js';\nexport { systemJSPrototype, REGISTRY }\n\nconst hasSymbol = typeof Symbol !== 'undefined';\nconst toStringTag = hasSymbol && Symbol.toStringTag;\nconst REGISTRY = hasSymbol ? Symbol() : '@';\n\n/**\n * Creates new SystemJS instance.\n *\n * @param {string} baseUrl\n * @constructor\n */\nfunction SystemJS({ baseUrl } = {}) {\n  this[REGISTRY] = Object.create(null);\n\n  baseUrl = new URL(baseUrl || DEFAULT_BASEURL);\n  if (!baseUrl.pathname.endsWith('/')) {\n    baseUrl.pathname += '/';\n  }\n\n  Object.defineProperty(this,'baseUrl', { value: baseUrl.href });\n}\n\nconst systemJSPrototype = SystemJS.prototype;\nsystemJSPrototype.import = function (id, parentUrl) {\n  const loader = this;\n  return Promise.resolve(loader.resolve(id, parentUrl))\n  .then(function (id) {\n    const load = getOrCreateLoad(loader, id);\n    return load.C || topLevelLoad(loader, load);\n  });\n};\n\n// Hookable createContext function -> allowing eg custom import meta\nsystemJSPrototype.createContext = function (parentId) {\n  return {\n    url: parentId\n  };\n};\n\n// onLoad(id, err) provided for tracing / hot-reloading\nif (TRACING)\n  systemJSPrototype.onload = function () {};\n\nlet lastRegister;\nsystemJSPrototype.register = function (deps, declare) {\n  lastRegister = [deps, declare];\n};\n\n/*\n * getRegister provides the last anonymous System.register call\n */\nsystemJSPrototype.getRegister = function () {\n  const _lastRegister = lastRegister;\n  lastRegister = undefined;\n  return _lastRegister;\n};\n\nfunction getOrCreateLoad (loader, id, firstParentUrl) {\n  let load = loader[REGISTRY][id];\n  if (load)\n    return load;\n\n  const importerSetters = [];\n  const ns = Object.create(null);\n  if (toStringTag)\n    Object.defineProperty(ns, toStringTag, { value: 'Module' });\n\n  let instantiatePromise = Promise.resolve()\n  .then(function () {\n    return loader.instantiate(id, firstParentUrl);\n  })\n  .then(function (registration) {\n    if (!registration)\n      throw new Error('Module ' + id + ' did not instantiate');\n    function _export (name, value) {\n      // note if we have hoisted exports (including reexports)\n      load.h = true;\n      let changed = false;\n      if (typeof name !== 'object') {\n        if (!(name in ns) || ns[name] !== value) {\n          ns[name] = value;\n          changed = true;\n        }\n      }\n      else {\n        for (let p in name) {\n          let value = name[p];\n          if (!(p in ns) || ns[p] !== value) {\n            ns[p] = value;\n            changed = true;\n          }\n        }\n      }\n      if (changed)\n        for (let i = 0; i < importerSetters.length; i++)\n          importerSetters[i](ns);\n      return value;\n    }\n    const declared = registration[1](_export, registration[1].length === 2 ? {\n      import: function (importId) {\n        return loader.import(importId, id);\n      },\n      meta: loader.createContext(id)\n    } : undefined);\n    load.e = declared.execute || function () {};\n    return [registration[0], declared.setters || []];\n  });\n\n  if (TRACING)\n    instantiatePromise = instantiatePromise.catch(function (err) {\n      loader.onload(load.id, err);\n      throw err;\n    });\n\n  const linkPromise = instantiatePromise\n  .then(function (instantiation) {\n    return Promise.all(instantiation[0].map(function (dep, i) {\n      const setter = instantiation[1][i];\n      return Promise.resolve(loader.resolve(dep, id))\n      .then(function (depId) {\n        const depLoad = getOrCreateLoad(loader, depId, id);\n        // depLoad.I may be undefined for already-evaluated\n        return Promise.resolve(depLoad.I)\n        .then(function () {\n          if (setter) {\n            depLoad.i.push(setter);\n            // only run early setters when there are hoisted exports of that module\n            // the timing works here as pending hoisted export calls will trigger through importerSetters\n            if (depLoad.h || !depLoad.I)\n              setter(depLoad.n);\n          }\n          return depLoad;\n        });\n      })\n    }))\n    .then(function (depLoads) {\n      load.d = depLoads;\n    });\n  });\n\n  // disable unhandled rejections\n  linkPromise.catch(function () {});\n\n  // Captial letter = a promise function\n  return load = loader[REGISTRY][id] = {\n    id: id,\n    // importerSetters, the setters functions registered to this dependency\n    // we retain this to add more later\n    i: importerSetters,\n    // module namespace object\n    n: ns,\n\n    // instantiate\n    I: instantiatePromise,\n    // link\n    L: linkPromise,\n    // whether it has hoisted exports\n    h: false,\n\n    // On instantiate completion we have populated:\n    // dependency load records\n    d: undefined,\n    // execution function\n    // set to NULL immediately after execution (or on any failure) to indicate execution has happened\n    // in such a case, pC should be used, and pLo, pLi will be emptied\n    e: undefined,\n\n    // On execution we have populated:\n    // the execution error if any\n    eE: undefined,\n    // in the case of TLA, the execution promise\n    E: undefined,\n\n    // On execution, pLi, pLo, e cleared\n\n    // Promise for top-level completion\n    C: undefined\n  };\n}\n\nfunction instantiateAll (loader, load, loaded) {\n  if (!loaded[load.id]) {\n    loaded[load.id] = true;\n    // load.L may be undefined for already-instantiated\n    return Promise.resolve(load.L)\n    .then(function () {\n      return Promise.all(load.d.map(function (dep) {\n        return instantiateAll(loader, dep, loaded);\n      }));\n    })\n  }\n}\n\nfunction topLevelLoad (loader, load) {\n  return load.C = instantiateAll(loader, load, {})\n  .then(function () {\n    return postOrderExec(loader, load, {});\n  })\n  .then(function () {\n    return load.n;\n  });\n}\n\n// the closest we can get to call(undefined)\nconst nullContext = Object.freeze(Object.create(null));\n\n// returns a promise if and only if a top-level await subgraph\n// throws on sync errors\nfunction postOrderExec (loader, load, seen) {\n  if (seen[load.id])\n    return;\n  seen[load.id] = true;\n\n  if (!load.e) {\n    if (load.eE)\n      throw load.eE;\n    if (load.E)\n      return load.E;\n    return;\n  }\n\n  // deps execute first, unless circular\n  let depLoadPromises;\n  load.d.forEach(function (depLoad) {\n    if (TRACING) {\n      try {\n        const depLoadPromise = postOrderExec(loader, depLoad, seen);\n        if (depLoadPromise)\n          (depLoadPromises = depLoadPromises || []).push(depLoadPromise);\n      }\n      catch (err) {\n        loader.onload(load.id, err);\n        throw err;\n      }\n    }\n    else {\n      const depLoadPromise = postOrderExec(loader, depLoad, seen);\n      if (depLoadPromise)\n        (depLoadPromises = depLoadPromises || []).push(depLoadPromise);\n    }\n  });\n  if (depLoadPromises) {\n    if (TRACING)\n      return Promise.all(depLoadPromises)\n      .then(doExec)\n      .catch(function (err) {\n        loader.onload(load.id, err);\n        throw err;\n      });\n    else\n      return load.E = Promise.all(depLoadPromises).then(doExec);\n  }\n\n  return doExec();\n\n  function doExec () {\n    try {\n      let execPromise = load.e.call(nullContext);\n      if (execPromise) {\n        if (TRACING)\n          execPromise = execPromise.then(function () {\n            load.C = load.n;\n            load.E = null; // indicates completion\n            loader.onload(load.id, null);\n          }, function (err) {\n            loader.onload(load.id, err);\n            throw err;\n          });\n        else\n          execPromise.then(function () {\n            load.C = load.n;\n            load.E = null;\n          });\n        execPromise.catch(function () {});\n        return load.E = load.E || execPromise;\n      }\n      // (should be a promise, but a minify optimization to leave out Promise.resolve)\n      load.C = load.n;\n      if (TRACING) loader.onload(load.id, null);\n    }\n    catch (err) {\n      if (TRACING) loader.onload(load.id, err);\n      load.eE = err;\n      throw err;\n    }\n    finally {\n      load.L = load.I = undefined;\n      load.e = null;\n    }\n  }\n}\n\nglobal.System = new SystemJS();\n","import vm from 'vm';\nimport stripShebang from 'strip-shebang';\n\nimport { isNode } from '../common';\n\n\nfunction unzipModuleVars(moduleVars = {}) {\n  return Object.entries(moduleVars).reduce(({ params, args }, [key, value]) => ({\n    params: [...params, key],\n    args: [...args, value],\n  }), { params: [], args: [] });\n}\n\n\nfunction wrapScript(sourceUrl, source, moduleVars) {\n  const { params, args } = unzipModuleVars(moduleVars);\n\n  const wrapped_before = `(function(${params.join(',')}){`;\n  const wrappee = stripShebang(source);\n  const wrapper_sourceUrl = sourceUrl ? `\\n//# sourceURL=${sourceUrl}` : '';\n  const wrapped_after = '})';\n\n  return `${wrapped_before}${wrappee}${wrapped_after}${wrapper_sourceUrl}`;\n}\n\n\nexport function compileScriptBrowser(sourceUrl, source, moduleVars) {\n  const { args } = unzipModuleVars(moduleVars);\n  const wrapped = wrapScript(sourceUrl, source, moduleVars);\n\n  (0, eval)(wrapped)(...args);\n}\n\n\nexport function compileScriptNode(sourceUrl, source, moduleVars) {\n  const { args } = unzipModuleVars(moduleVars);\n  const wrapped = wrapScript(sourceUrl, source, moduleVars);\n\n  const runOptions = {\n    displayErrors: true,\n    filename: `${sourceUrl}`,\n    lineOffset: 0,\n  };\n\n  vm.runInThisContext(wrapped, runOptions)(...args);\n}\n\n\nexport function compileScript(sourceUrl, source, moduleVars) {\n  return (isNode? compileScriptNode : compileScriptBrowser)(sourceUrl, source, moduleVars);\n}\n","/**\n * This polyfills Node with a version of fetch that can handle\n * \"file\" URLs.\n */\n\nimport 'isomorphic-fetch';\nimport fileFetch from 'file-fetch';\n\nimport { global, isNode } from '../common';\n\nconst globalFetch = global.fetch;\n\nexport function fetch(input, init) {\n  const { protocol, href } = new URL(input);\n  if (isNode && protocol === 'file:') {\n   return fileFetch(href, init);\n  }\n  return globalFetch(href, init);\n}\n","import { ok as assert } from 'assert';\nimport path from 'path';\n\nimport { systemJSPrototype } from '../system-core.js';\nimport { URL } from '../common.js';\nimport { compileScript } from '../utils/compile';\nimport { fetch } from '../utils/fetch';\n\n\nfunction detectFormat(url) {\n  const ext = path.extname(url.pathname);\n\n  if (ext === '.mjs') {\n    return 'esm';\n  } else if (ext === '.json') {\n    return 'json';\n  } else if (ext === '.js') {\n    return 'cjs';\n  } else if (url.protocol === 'builtin:') {\n    return 'builtin';\n  }\n\n  return undefined;\n}\n\n\nasync function loadRegisterModule(url, loader) {\n  const source = await fetch(url).then(response => response.text());\n\n  compileScript(url, source, {\n    System: loader,\n    SystemJS: loader,\n  });\n}\n\n\nasync function loadBuiltinModule(url, loader) {\n  const name = url.pathname;\n\n  const nodeModule = require(name);\n\n  const registration = [[], function declare(_export) {\n    return {\n      execute() {\n        _export('default', nodeModule);\n        _export(nodeModule);\n      },\n    };\n  }];\n\n  loader.register(...registration);\n}\n\n\nasync function loadJSONModule(url, loader) {\n  const data = await fetch(url).then(response => response.json());\n\n  const registration = [[], function declare(_export) {\n    return {\n      execute() {\n        _export('default', data);\n      },\n    };\n  }];\n\n  loader.register(...registration);\n}\n\n\nsystemJSPrototype.instantiate = async function instantiate(url, firstParentUrl) {\n  assert(url, 'missing url');\n  assert(url instanceof URL || typeof url === 'string', 'url must be a URL or string');\n\n  url = new URL(url);\n\n  const format = detectFormat(url);\n\n  try {\n    switch(format) {\n      case 'builtin':\n        await loadBuiltinModule(url, this);\n        break;\n\n      case 'json':\n        await loadJSONModule(url, this);\n        break;\n\n      default:\n        await loadRegisterModule(url, this);\n    }\n  } catch (err) {\n    if (err instanceof ReferenceError) {\n      throw err;\n    }\n    throw new Error(`Error loading ${url}${firstParentUrl ? ' from ' + firstParentUrl : ''}`);\n  }\n\n  return this.getRegister();\n};\n","/*\n * SystemJS global script loading support\n * Extra for the s.js build only\n * (Included by default in system.js build)\n */\n\nimport { global } from '../common';\n\nconst systemJSPrototype = System.constructor.prototype;\n\n// safari unpredictably lists some new globals first or second in object order\nlet firstGlobalProp, secondGlobalProp, lastGlobalProp;\nfunction getGlobalProp () {\n  let cnt = 0;\n  let lastProp;\n  for (let p in global) {\n    if (!global.hasOwnProperty(p))\n      continue;\n    if (cnt === 0 && p !== firstGlobalProp || cnt === 1 && p !== secondGlobalProp)\n      return p;\n    cnt++;\n    lastProp = p;\n  }\n  if (lastProp !== lastGlobalProp)\n    return lastProp;\n}\n\nfunction noteGlobalProps () {\n  // alternatively Object.keys(global).pop()\n  // but this may be faster (pending benchmarks)\n  firstGlobalProp = secondGlobalProp = undefined;\n  for (let p in global) {\n    if (!global.hasOwnProperty(p))\n      continue;\n    if (!firstGlobalProp)\n      firstGlobalProp = p;\n    else if (!secondGlobalProp)\n      secondGlobalProp = p;\n    lastGlobalProp = p;\n  }\n  return lastGlobalProp;\n}\n\nconst impt = systemJSPrototype.import;\nsystemJSPrototype.import = function (id, parentUrl) {\n  noteGlobalProps();\n  return impt.call(this, id, parentUrl);\n};\n\nconst emptyInstantiation = [[], function () { return {} }];\n\nconst getRegister = systemJSPrototype.getRegister;\nsystemJSPrototype.getRegister = function () {\n  const lastRegister = getRegister.call(this);\n  if (lastRegister)\n    return lastRegister;\n\n  // no registration -> attempt a global detection as difference from snapshot\n  // when multiple globals, we take the global value to be the last defined new global object property\n  // for performance, this will not support multi-version / global collisions as previous SystemJS versions did\n  // note in Edge, deleting and re-adding a global does not change its ordering\n  const globalProp = getGlobalProp();\n  if (!globalProp)\n    return emptyInstantiation;\n\n  let globalExport;\n  try {\n    globalExport = global[globalProp];\n  }\n  catch (e) {\n    return emptyInstantiation;\n  }\n\n  return [[], function (_export) {\n    return { execute: function () { _export('default', globalExport) } };\n  }];\n};\n","import fs from 'fs';\nimport _path from 'path';\nimport url from 'url';\n\nimport fileUrl from 'file-url';\n\n\nexport const URL = global.URL\n  ? global.URL\n  : url.URL;\n\n\nexport const pathToFileURL = url.pathToFileURL\n  ? url.pathToFileURL\n  : function pathToFileURL(path) {\n    const theUrl = new URL(fileUrl(path));\n    if (path.endsWith(_path.sep)) {\n      theUrl.pathname += '/';\n    }\n    return theUrl;\n  };\n\nexport const DEFAULT_BASEURL = pathToFileURL(process.cwd() + '/');\n\n\nexport function fileExists(path) {\n  try {\n    fs.accessSync(path);\n    return fs.statSync(path).isFile();\n  } catch (err) {\n    return false;\n  }\n}\n\n\nexport function isURL(value) {\n  if (value instanceof URL) {\n    return true;\n  }\n\n  if (typeof value === 'string') {\n    try {\n      new URL(value);\n      return true;\n    } catch (err) {}\n  }\n\n  return false;\n}\n","/*\n * Import map support for SystemJS\n *\n * Browser:\n *   <script type=\"systemjs-importmap\">{}</script>\n *   OR\n *   <script type=\"systemjs-importmap\" src=package.json></script>\n *\n * Node:\n *   Place \"systemjs-importmap.json\" in project root folder\n *\n * Only supports loading the first import map\n */\n\nimport { global, URL, isBrowser, isNode, parseImportMap, resolveImportMap } from '../common.js';\nimport { systemJSPrototype } from '../system-core.js';\nimport { fetch } from '../utils/fetch.js';\nimport { fileExists, isURL } from './node-common.js';\n\n\nfunction locateImportMapBrowser() {\n  if (typeof document !== 'undefined') {\n    const scripts = Array.from(document.getElementsByTagName('script'));\n    const importMapScript = scripts.find((script => script.type === 'systemjs-importmap'));\n\n    if (importMapScript) {\n      if (importMapScript.src) {\n        return new URL(importMapScript.src);\n      }\n      return JSON.parse(importMapScript.innerHTML);\n    }\n  }\n\n  return undefined;\n}\n\n\nfunction locateImportMapNode(baseUrl, importMapUrl) {\n  if (isURL(importMapUrl)) {\n    importMapUrl = new URL(importMapUrl);\n  } else {\n    importMapUrl = new URL('./systemjs-importmap.json', baseUrl);\n  }\n\n  if (fileExists(importMapUrl)) {\n    return importMapUrl;\n  }\n\n  return undefined;\n}\n\n\nfunction locateImportMap(baseUrl, importMapUrl) {\n  if (isBrowser) {\n    return locateImportMapBrowser();\n  } else if (isNode) {\n    return locateImportMapNode(baseUrl, importMapUrl);\n  }\n}\n\n\nfunction fetchImportMap(input) {\n  if (input instanceof URL) {\n    return fetch(input.href).then(res => res.json());\n  } else if (typeof input === 'object' && input !== null) {\n    return Promise.resolve(input);\n  }\n\n  return Promise.resolve(undefined);\n}\n\n\nfunction createImportMap(loader, importMapUrl) {\n  const location = locateImportMap(loader.baseUrl, importMapUrl);\n\n  return fetchImportMap(location).then(data => {\n    if (data) {\n      const baseUrl = location instanceof URL ? location.href : loader.baseUrl;\n      return parseImportMap(data, baseUrl);\n    } else {\n      return { imports: {}, scopes: {} };\n    }\n  });\n}\n\n\nconst importMapRegistry = new WeakMap();\n\nfunction setImportMap(loader, importMap) {\n  importMapRegistry.set(loader, importMap);\n}\n\nfunction getImportMap(loader) {\n  return importMapRegistry.get(loader);\n}\n\n\nconst constructor = systemJSPrototype.constructor;\nfunction SystemJS({ baseUrl, importMapUrl } = {}) {\n  constructor.call(this, { baseUrl });\n\n  this.registerRegistry = Object.create(null);\n  const importMap = createImportMap(this, importMapUrl);\n  setImportMap(this, importMap);\n}\n\nSystemJS.prototype = Object.create(systemJSPrototype);\nSystemJS.prototype.constructor = SystemJS;\n\n/**\n * @async\n *\n * Resolves a module import specifier.\n *\n * @param {string} id - Module import specifier\n * @param {string} [parentUrl] - The URL of the importing module.\n *\n * @return {Promise<string>} The resolved URL\n */\nSystemJS.prototype.resolve = function resolve(id, parentUrl) {\n  parentUrl = parentUrl || this.baseUrl;\n  return getImportMap(this).then(importMap => resolveImportMap(id, parentUrl, importMap));\n};\n\nglobal.System = new SystemJS();\n","import { systemJSPrototype, REGISTRY } from '../system-core.js';\n\nsystemJSPrototype.get = function get(id) {\n  const load = this[REGISTRY][id];\n  if (load && load.e === null && !load.E) {\n    if (load.eE)\n      return null;\n    return load.n;\n  }\n};\n\n// Delete function provided for hot-reloading use cases\nsystemJSPrototype.delete = function (id) {\n  const load = this.get(id);\n  if (load === undefined)\n    return false;\n  // remove from importerSetters\n  // (release for gc)\n  if (load && load.d)\n    load.d.forEach(function (depLoad) {\n      const importerIndex = depLoad.i.indexOf(load);\n      if (importerIndex !== -1)\n        depLoad.i.splice(importerIndex, 1);\n    });\n  return delete this[REGISTRY][id];\n};\n"],"names":["URL","global","assert","systemJSPrototype","pathToFileURL","path","fileUrl","_path","DEFAULT_BASEURL","SystemJS"],"mappings":"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"}