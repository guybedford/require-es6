{"version":3,"file":"named-exports.js","sources":["../../src/extras/named-exports.js"],"sourcesContent":["/*\n * Named exports support for legacy module formats in SystemJS 2.0\n */\nconst systemPrototype = System.constructor.prototype;\n\n// hook System.register to know the last declaration binding\nlet lastRegisterDeclare;\nconst systemRegister = systemPrototype.register;\nsystemPrototype.register = function (deps, declare) {\n  lastRegisterDeclare = declare;\n  systemRegister.call(this, deps, declare);\n};\n\nconst getRegister = systemPrototype.getRegister;\nsystemPrototype.getRegister = function () {\n  const register = getRegister.call(this);\n  // if it is an actual System.register call, then its ESM\n  // -> dont add named exports\n  if (!register || register[1] === lastRegisterDeclare || register[1].length === 0)\n    return register;\n\n  // otherwise it was provided by a custom instantiator\n  // -> extend the registration with named exports support\n  const registerDeclare = register[1];\n  register[1] = function (_export, _context) {\n    // hook the _export function to note the default export\n    let defaultExport;\n    const declaration = registerDeclare.call(this, function (name, value) {\n      if (name === 'default')\n        defaultExport = value;\n      _export(name, value);\n    }, _context);\n    // hook the execute function\n    const execute = declaration.execute;\n    if (execute)\n      declaration.execute = function () {\n        execute.call(this);\n        // do a bulk export of the default export object\n        // to export all its names as named exports\n        if (typeof defaultExport === 'object')\n          _export(defaultExport);\n      };\n    return declaration;\n  };\n  return register;\n};\n"],"names":[],"mappings":";EAAA;EACA;EACA;EACA,MAAM,eAAe,GAAG,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC;;EAErD;EACA,IAAI,mBAAmB,CAAC;EACxB,MAAM,cAAc,GAAG,eAAe,CAAC,QAAQ,CAAC;EAChD,eAAe,CAAC,QAAQ,GAAG,UAAU,IAAI,EAAE,OAAO,EAAE;EACpD,EAAE,mBAAmB,GAAG,OAAO,CAAC;EAChC,EAAE,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;EAC3C,CAAC,CAAC;;EAEF,MAAM,WAAW,GAAG,eAAe,CAAC,WAAW,CAAC;EAChD,eAAe,CAAC,WAAW,GAAG,YAAY;EAC1C,EAAE,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC1C;EACA;EACA,EAAE,IAAI,CAAC,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,mBAAmB,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC;EAClF,IAAI,OAAO,QAAQ,CAAC;;EAEpB;EACA;EACA,EAAE,MAAM,eAAe,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtC,EAAE,QAAQ,CAAC,CAAC,CAAC,GAAG,UAAU,OAAO,EAAE,QAAQ,EAAE;EAC7C;EACA,IAAI,IAAI,aAAa,CAAC;EACtB,IAAI,MAAM,WAAW,GAAG,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,IAAI,EAAE,KAAK,EAAE;EAC1E,MAAM,IAAI,IAAI,KAAK,SAAS;EAC5B,QAAQ,aAAa,GAAG,KAAK,CAAC;EAC9B,MAAM,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;EAC3B,KAAK,EAAE,QAAQ,CAAC,CAAC;EACjB;EACA,IAAI,MAAM,OAAO,GAAG,WAAW,CAAC,OAAO,CAAC;EACxC,IAAI,IAAI,OAAO;EACf,MAAM,WAAW,CAAC,OAAO,GAAG,YAAY;EACxC,QAAQ,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC3B;EACA;EACA,QAAQ,IAAI,OAAO,aAAa,KAAK,QAAQ;EAC7C,UAAU,OAAO,CAAC,aAAa,CAAC,CAAC;EACjC,OAAO,CAAC;EACR,IAAI,OAAO,WAAW,CAAC;EACvB,GAAG,CAAC;EACJ,EAAE,OAAO,QAAQ,CAAC;EAClB,CAAC,CAAC;;;;"}