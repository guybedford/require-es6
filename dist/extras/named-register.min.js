!function(t){const e=t.System;o(e);const s=e.constructor.prototype,r=e.constructor,i=function(){r.call(this),o(this)};let n;function o(t){t.registerRegistry=Object.create(null),t.nameRegistry=[]}i.prototype=s,e.constructor=i;const c=s.register;s.register=function(t,e,s){if("string"!=typeof t)return c.apply(this,arguments);const r=[e,s];return this.registerRegistry[t]=r,n||(n=r,setTimeout(function(){n=null})),c.apply(this,arguments)};const l=s.resolve;s.resolve=function(t,e){try{return l.call(this,t,e)}catch(e){if(t in this.registerRegistry||this.nameRegistry.includes(t))return t;throw e}};const u=s.instantiate;s.instantiate=function(t,e){const s=this.registerRegistry[t];return s?(delete this.registerRegistry[t],this.nameRegistry.push(t),s):u.call(this,t,e)};const g=s.getRegister;s.getRegister=function(){const t=g.call(this),e=n||t;return n=null,e}}("undefined"!=typeof self?self:global);