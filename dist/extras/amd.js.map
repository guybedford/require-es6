{"version":3,"file":"amd.js","sources":["../../src/extras/amd.js"],"sourcesContent":["/*\n * Support for AMD loading\n */\nconst systemPrototype = System.constructor.prototype;\n\nconst emptyInstantiation = [[], function () { return {} }];\n\nfunction unsupportedRequire () {\n  throw new Error('AMD require not supported.');\n}\n\nfunction emptyFn () {}\n\nconst requireExportsModule = ['require', 'exports', 'module'];\n\nfunction createAMDRegister (amdDefineDeps, amdDefineExec) {\n  const exports = {};\n  const module = { exports: exports };\n  const depModules = [];\n  const setters = [];\n  let splice = 0;\n  for (let i = 0; i < amdDefineDeps.length; i++) {\n    const id = amdDefineDeps[i];\n    const index = setters.length;\n    if (id === 'require') {\n      depModules[i] = unsupportedRequire;\n      splice++;\n    }\n    else if (id === 'module') {\n      depModules[i] = module;\n      splice++;\n    }\n    else if (id === 'exports') {\n      depModules[i] = exports;\n      splice++;\n    }\n    else {\n      // needed for ie11 lack of iteration scope\n      const idx = i;\n      setters.push(function (ns) {\n        depModules[idx] = ns.default;\n      });\n    }\n    if (splice)\n      amdDefineDeps[index] = id;\n  }\n  if (splice)\n    amdDefineDeps.length -= splice;\n  const amdExec = amdDefineExec;\n  return [amdDefineDeps, function (_export) {\n    _export('default', exports);\n    return {\n      setters: setters,\n      execute: function () {\n        module.exports = amdExec.apply(exports, depModules) || module.exports;\n        if (exports !== module.exports)\n          _export('default', module.exports);\n      }\n    };\n  }];\n}\n\n// hook System.register to know the last declaration binding\nlet lastRegisterDeclare;\nconst systemRegister = systemPrototype.register;\n// if we have named register support continue to use it\nif (systemRegister.length === 3) {\n  systemPrototype.register = function (name, deps, declare) {\n    if (typeof name !== 'string')\n      lastRegisterDeclare = deps;\n    systemRegister.apply(this, arguments);\n  };\n}\nelse {\n  systemPrototype.register = function (deps, declare) {\n    lastRegisterDeclare = declare;\n    systemRegister.apply(this, arguments);\n  };\n}\n\nconst getRegister = systemPrototype.getRegister;\nsystemPrototype.getRegister = function () {\n  const register = getRegister.call(this);\n  // if its an actual System.register leave it\n  if (register && register[1] === lastRegisterDeclare)\n    return register;\n\n  // otherwise AMD takes priority\n  // no registration -> attempt AMD detection\n  if (!amdDefineDeps)\n    return register || emptyInstantiation;\n\n  const registration = createAMDRegister(amdDefineDeps, amdDefineExec);\n  amdDefineDeps = null;\n  return registration;\n};\nlet amdDefineDeps, amdDefineExec;\nglobal.define = function (name, deps, execute) {\n  // define('', [], function () {})\n  if (typeof name === 'string') {\n    if (amdDefineDeps) {\n      if (!System.registerRegistry)\n        throw new Error('Include the named register extension named AMD support in SystemJS.');\n      System.registerRegistry[name] = createAMDRegister(deps, execute);\n      amdDefineDeps = [];\n      amdDefineExec = emptyFn;\n      return;\n    }\n    else {\n      if (System.registerRegistry)\n        System.registerRegistry[name] = createAMDRegister(deps, execute);\n      name = deps;\n      deps = execute;\n    }\n  }\n  // define([], function () {})\n  if (name instanceof Array) {\n    amdDefineDeps = name;\n    amdDefineExec = deps;\n  }\n  // define({})\n  else if (typeof name === 'object') {\n    amdDefineDeps = [];\n    amdDefineExec = function () { return name };\n  }\n  // define(function () {})\n  else if (typeof name === 'function') {\n    amdDefineDeps = requireExportsModule;\n    amdDefineExec = name;\n  }\n};\nglobal.define.amd = {};\n"],"names":["systemPrototype","System","constructor","prototype","emptyInstantiation","unsupportedRequire","Error","emptyFn","requireExportsModule","createAMDRegister","amdDefineDeps","amdDefineExec","exports","module","depModules","setters","splice","i","length","id","index","idx","push","ns","default","amdExec","_export","execute","apply","lastRegisterDeclare","systemRegister","register","name","deps","declare","arguments","getRegister","call","registration","global","define","registerRegistry","Array","amd"],"mappings":"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"}