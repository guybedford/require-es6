{"version":3,"file":"amd.js","sources":["../../src/extras/amd.js"],"sourcesContent":["/*\n* Support for AMD loading\n*/\n\nconst systemPrototype = System.constructor.prototype;\n\nconst emptyInstantiation = [[], function () { return {} }];\n\nfunction unsupportedRequire () {\n  throw new Error('AMD require not supported.');\n}\n\nfunction emptyFn () {}\n\nconst requireExportsModule = ['require', 'exports', 'module'];\n\nfunction createAMDRegister (amdDefineDeps, amdDefineExec) {\n  const exports = {};\n  const module = { exports: exports };\n  const depModules = [];\n  const setters = [];\n  let splice = 0;\n  for (let i = 0; i < amdDefineDeps.length; i++) {\n    const id = amdDefineDeps[i];\n    const index = setters.length;\n    if (id === 'require') {\n      depModules[i] = unsupportedRequire;\n      splice++;\n    }\n    else if (id === 'module') {\n      depModules[i] = module;\n      splice++;\n    }\n    else if (id === 'exports') {\n      depModules[i] = exports;\n      splice++;\n    }\n    else {\n      // needed for ie11 lack of iteration scope\n      const idx = i;\n      setters.push(function (ns) {\n        depModules[idx] = ns.default;\n      });\n    }\n    if (splice)\n      amdDefineDeps[index] = id;\n  }\n  if (splice)\n    amdDefineDeps.length -= splice;\n  const amdExec = amdDefineExec;\n  return [amdDefineDeps, function (_export) {\n    _export('default', exports);\n    return {\n      setters: setters,\n      execute: function () {\n        module.exports = amdExec.apply(exports, depModules) || module.exports;\n        if (exports !== module.exports)\n          _export('default', module.exports);\n      }\n    };\n  }];\n}\n\n// hook System.register to know the last declaration binding\nlet lastRegisterDeclare;\nconst systemRegister = systemPrototype.register;\n// if we have named register support continue to use it\nif (systemRegister.length === 3) {\n  systemPrototype.register = function (name, deps, declare) {\n    if (typeof name !== 'string')\n      lastRegisterDeclare = deps;\n    systemRegister.apply(this, arguments);\n  };\n}\nelse {\n  systemPrototype.register = function (deps, declare) {\n    lastRegisterDeclare = declare;\n    systemRegister.apply(this, arguments);\n  };\n}\n\nconst getRegister = systemPrototype.getRegister;\nsystemPrototype.getRegister = function () {\n  const register = getRegister.call(this);\n  // if its an actual System.register leave it\n  if (register && register[1] === lastRegisterDeclare)\n    return register;\n\n  // otherwise AMD takes priority\n  // no registration -> attempt AMD detection\n  if (!amdDefineDeps)\n    return register || emptyInstantiation;\n\n  const registration = createAMDRegister(amdDefineDeps, amdDefineExec);\n  amdDefineDeps = null;\n  return registration;\n};\nlet amdDefineDeps, amdDefineExec;\nglobal.define = function (name, deps, execute) {\n  // define('', [], function () {})\n  if (typeof name === 'string') {\n    if (amdDefineDeps) {\n      if (!System.registerRegistry)\n        throw new Error('Include the named register extension named AMD support in SystemJS.');\n      System.registerRegistry[name] = createAMDRegister(deps, execute);\n      amdDefineDeps = [];\n      amdDefineExec = emptyFn;\n      return;\n    }\n    else {\n      if (System.registerRegistry)\n        System.registerRegistry[name] = createAMDRegister(deps, execute);\n      name = deps;\n      deps = execute;\n    }\n  }\n  // define([], function () {})\n  if (name instanceof Array) {\n    amdDefineDeps = name;\n    amdDefineExec = deps;\n  }\n  // define({})\n  else if (typeof name === 'object') {\n    amdDefineDeps = [];\n    amdDefineExec = function () { return name };\n  }\n  // define(function () {})\n  else if (typeof name === 'function') {\n    amdDefineDeps = requireExportsModule;\n    amdDefineExec = name;\n  }\n};\nglobal.define.amd = {};\n"],"names":["global"],"mappings":";;;;;;CAAA;;;;CAIA,MAAM,eAAe,GAAG,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC;;CAErD,MAAM,kBAAkB,GAAG,CAAC,EAAE,EAAE,YAAY,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC;;CAE3D,SAAS,kBAAkB,IAAI;GAC7B,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;EAC/C;;CAED,SAAS,OAAO,IAAI,EAAE;;CAEtB,MAAM,oBAAoB,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;;CAE9D,SAAS,iBAAiB,EAAE,aAAa,EAAE,aAAa,EAAE;GACxD,MAAM,OAAO,GAAG,EAAE,CAAC;GACnB,MAAM,MAAM,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC;GACpC,MAAM,UAAU,GAAG,EAAE,CAAC;GACtB,MAAM,OAAO,GAAG,EAAE,CAAC;GACnB,IAAI,MAAM,GAAG,CAAC,CAAC;GACf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;KAC7C,MAAM,EAAE,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;KAC5B,MAAM,KAAK,GAAG,OAAO,CAAC,MAAM,CAAC;KAC7B,IAAI,EAAE,KAAK,SAAS,EAAE;OACpB,UAAU,CAAC,CAAC,CAAC,GAAG,kBAAkB,CAAC;OACnC,MAAM,EAAE,CAAC;MACV;UACI,IAAI,EAAE,KAAK,QAAQ,EAAE;OACxB,UAAU,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC;OACvB,MAAM,EAAE,CAAC;MACV;UACI,IAAI,EAAE,KAAK,SAAS,EAAE;OACzB,UAAU,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;OACxB,MAAM,EAAE,CAAC;MACV;UACI;;OAEH,MAAM,GAAG,GAAG,CAAC,CAAC;OACd,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;SACzB,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC;QAC9B,CAAC,CAAC;MACJ;KACD,IAAI,MAAM;OACR,aAAa,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;IAC7B;GACD,IAAI,MAAM;KACR,aAAa,CAAC,MAAM,IAAI,MAAM,CAAC;GACjC,MAAM,OAAO,GAAG,aAAa,CAAC;GAC9B,OAAO,CAAC,aAAa,EAAE,UAAU,OAAO,EAAE;KACxC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;KAC5B,OAAO;OACL,OAAO,EAAE,OAAO;OAChB,OAAO,EAAE,YAAY;SACnB,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,UAAU,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC;SACtE,IAAI,OAAO,KAAK,MAAM,CAAC,OAAO;WAC5B,OAAO,CAAC,SAAS,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC;QACtC;MACF,CAAC;IACH,CAAC,CAAC;EACJ;;;CAGD,IAAI,mBAAmB,CAAC;CACxB,MAAM,cAAc,GAAG,eAAe,CAAC,QAAQ,CAAC;;CAEhD,IAAI,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE;GAC/B,eAAe,CAAC,QAAQ,GAAG,UAAU,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE;KACxD,IAAI,OAAO,IAAI,KAAK,QAAQ;OAC1B,mBAAmB,GAAG,IAAI,CAAC;KAC7B,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;IACvC,CAAC;EACH;MACI;GACH,eAAe,CAAC,QAAQ,GAAG,UAAU,IAAI,EAAE,OAAO,EAAE;KAClD,mBAAmB,GAAG,OAAO,CAAC;KAC9B,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;IACvC,CAAC;EACH;;CAED,MAAM,WAAW,GAAG,eAAe,CAAC,WAAW,CAAC;CAChD,eAAe,CAAC,WAAW,GAAG,YAAY;GACxC,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;GAExC,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,mBAAmB;KACjD,OAAO,QAAQ,CAAC;;;;GAIlB,IAAI,CAAC,aAAa;KAChB,OAAO,QAAQ,IAAI,kBAAkB,CAAC;;GAExC,MAAM,YAAY,GAAG,iBAAiB,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;GACrE,aAAa,GAAG,IAAI,CAAC;GACrB,OAAO,YAAY,CAAC;EACrB,CAAC;CACF,IAAI,aAAa,EAAE,aAAa,CAAC;AACjCA,eAAM,CAAC,MAAM,GAAG,UAAU,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE;;GAE7C,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;KAC5B,IAAI,aAAa,EAAE;OACjB,IAAI,CAAC,MAAM,CAAC,gBAAgB;SAC1B,MAAM,IAAI,KAAK,CAAC,qEAAqE,CAAC,CAAC;OACzF,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,iBAAiB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;OACjE,aAAa,GAAG,EAAE,CAAC;OACnB,aAAa,GAAG,OAAO,CAAC;OACxB,OAAO;MACR;UACI;OACH,IAAI,MAAM,CAAC,gBAAgB;SACzB,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,iBAAiB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;OACnE,IAAI,GAAG,IAAI,CAAC;OACZ,IAAI,GAAG,OAAO,CAAC;MAChB;IACF;;GAED,IAAI,IAAI,YAAY,KAAK,EAAE;KACzB,aAAa,GAAG,IAAI,CAAC;KACrB,aAAa,GAAG,IAAI,CAAC;IACtB;;QAEI,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;KACjC,aAAa,GAAG,EAAE,CAAC;KACnB,aAAa,GAAG,YAAY,EAAE,OAAO,IAAI,EAAE,CAAC;IAC7C;;QAEI,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;KACnC,aAAa,GAAG,oBAAoB,CAAC;KACrC,aAAa,GAAG,IAAI,CAAC;IACtB;EACF,CAAC;AACFA,eAAM,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE,CAAC;;;;;;;;;;;;"}